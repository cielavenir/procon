#!/usr/bin/ruby
require 'base64'
require 'zlib'
require 'stringio'
img = StringIO.new Zlib.inflate Base64.decode64 DATA.read
sig = img.gets.chomp
width, height = img.gets.split.map &:to_i
depth = img.gets.to_i
if false
img = img.read.bytes.each_slice(3).map{|r,g,b|r+g+b}
raise if sig!='P6'
gets.to_i.times{
y,x=gets.split.map &:to_i
p img[y*width+x]
}
elsif false
img = img.read.bytes.each_slice(3).map{|r,g,b|(r+g+b)/3/32*32}
STDOUT.puts 'P5'
STDOUT.puts '%d %d'%[width,height]
STDOUT.puts '%d'%depth
STDOUT.write img.pack 'C*'
elsif true
img = img.read.bytes.each_slice(3).map{|r,g,b|(r+g+b)/3/32}
STDOUT.write img.pack 'C*'
else
img = img.read.bytes.each_slice(3).map{|r,g,b|(r+g+b)/3/32}
img << 0 if img.size%2>0
img = img.each_slice(2).map{|x,y|x<<4|y}
STDOUT.write img.pack 'C*'
end

# icon.ppm_p6.zlib.b64
__END__
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
