#!/usr/bin/ruby

#グリッドから最大長方形を求める
def checkio(data)
	y=data.size
	x=data[0].size
	m=Array.new(y){[0]*x}
	y.times{|j|
		r=0
		x.times{|i|
			if data[j][i]==1
				r+=1
			else
				r=0
			end
			m[j][i]=r
		}
	}
	r=0
	x.times{|i|
		y.times{|j|
			ma=9999999
			j.step(y-1){|k|
				ma=[ma,m[k][i]].min
				r=[r,ma*(k-j+1)].max
			}
		}
	}
	r
end

#Dateクラスの代わり
def zeller(_y,m,d)
	m+=1
	if m<4 then _y-=1;m+=12 end
	y=_y/100;z=_y%100
	(5*y+z+y/4+z/4+13*m/5+d-1)%7
end
def leap(y)
	return true if y%400==0
	return nil if y%100==0
	y%4==0
end
DAYS=[0,31,28,31,30,31,30,31,31,30,31,30,31]

#main
def calc(y,m)
	wday=firstwday=zeller(y,m,1)
	lastday=m==2&&leap(y) ? 29 : DAYS[m]
	calendar=Array.new(6){[0]*7}

	1.step(lastday){|d|
		if 1<=wday&&wday<=5 && !$holiday.include?([y,m,d])
			calendar[(firstwday+d-1)/7][(firstwday+d-1)%7]=1
		end
		wday=(wday+1)%7
	}
	return checkio(calendar)
end

$holiday=DATA.map{|e|e.split('/').map(&:to_i)}
r=0
2006.step(2015){|y|
	1.step(12){|m|
		r+=calc(y,m)
	}
}
p r # 1875

__END__
2006/01/01
2006/01/02
2006/01/09
2006/02/11
2006/03/21
2006/04/29
2006/05/03
2006/05/04
2006/05/05
2006/07/17
2006/09/18
2006/09/23
2006/10/09
2006/11/03
2006/11/23
2006/12/23
2007/01/01
2007/01/08
2007/02/11
2007/02/12
2007/03/21
2007/04/29
2007/04/30
2007/05/03
2007/05/04
2007/05/05
2007/07/16
2007/09/17
2007/09/23
2007/09/24
2007/10/08
2007/11/03
2007/11/23
2007/12/23
2007/12/24
2008/01/01
2008/01/14
2008/02/11
2008/03/20
2008/04/29
2008/05/03
2008/05/04
2008/05/05
2008/05/06
2008/07/21
2008/09/15
2008/09/23
2008/10/13
2008/11/03
2008/11/23
2008/11/24
2008/12/23
2009/01/01
2009/01/12
2009/02/11
2009/03/20
2009/04/29
2009/05/03
2009/05/04
2009/05/05
2009/05/06
2009/07/20
2009/09/21
2009/09/22
2009/09/23
2009/10/12
2009/11/03
2009/11/23
2009/12/23
2010/01/01
2010/01/11
2010/02/11
2010/03/21
2010/03/22
2010/04/29
2010/05/03
2010/05/04
2010/05/05
2010/07/19
2010/09/20
2010/09/23
2010/10/11
2010/11/03
2010/11/23
2010/12/23
2011/01/01
2011/01/10
2011/02/11
2011/03/21
2011/04/29
2011/05/03
2011/05/04
2011/05/05
2011/07/18
2011/09/19
2011/09/23
2011/10/10
2011/11/03
2011/11/23
2011/12/23
2012/01/01
2012/01/02
2012/01/09
2012/02/11
2012/03/20
2012/04/29
2012/04/30
2012/05/03
2012/05/04
2012/05/05
2012/07/16
2012/09/17
2012/09/22
2012/10/08
2012/11/03
2012/11/23
2012/12/23
2012/12/24
2013/01/01
2013/01/14
2013/02/11
2013/03/20
2013/04/29
2013/05/03
2013/05/04
2013/05/05
2013/05/06
2013/07/15
2013/09/16
2013/09/23
2013/10/14
2013/11/03
2013/11/04
2013/11/23
2013/12/23
2014/01/01
2014/01/13
2014/02/11
2014/03/21
2014/04/29
2014/05/03
2014/05/04
2014/05/05
2014/05/06
2014/07/21
2014/09/15
2014/09/23
2014/10/13
2014/11/03
2014/11/23
2014/11/24
2014/12/23
2015/01/01
2015/01/12
2015/02/11
2015/03/21
2015/04/29
2015/05/03
2015/05/04
2015/05/05
2015/05/06
2015/07/20
2015/09/21
2015/09/22
2015/09/23
2015/10/12
2015/11/03
2015/11/23
2015/12/23